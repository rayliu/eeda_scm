package controllers.eeda;import models.UserLogin;import org.apache.shiro.SecurityUtils;import org.apache.shiro.subject.Subject;import com.jfinal.core.Controller;import com.jfinal.log.Logger;public class UserProfileController extends Controller {	private Logger logger = Logger.getLogger(UserProfileController.class);	Subject currentUser = SecurityUtils.getSubject();	private boolean isAuthenticated() {		if (!currentUser.isAuthenticated()) {			redirect("/login");			return false;		}		setAttr("userId", currentUser.getPrincipal());		return true;	}	public void index() {		if (!isAuthenticated())			return;		UserLogin user = UserLogin.dao.findFirst("select * from user_login where user_name=?", currentUser.getPrincipal().toString());		setAttr("user", user).render("/eeda/userProfileForm.html");	}	public void save() {		if (!isAuthenticated())			return;		UserLogin user = UserLogin.dao.findFirst("select * from user_login where user_name=?", currentUser.getPrincipal().toString());		user.set("password", getPara("new_pwd")).update();		setAttr("saveOK", "ok");		index();	}}